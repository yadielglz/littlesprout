import{c as Z,u as _,d as ee,j as e,b as k,m as te,V as y,g as U,D as T}from"./index-b97ebd9a.js";import{r as n}from"./vendor-863865b6.js";import{f as D,T as ae}from"./Timer-c7f2b3ed.js";import{P as se,T as re,M as A}from"./Modal-09ee3ecf.js";import{P as le}from"./plus-a2564613.js";import{F as ie,C as de}from"./filter-574f200f.js";import"./charts-3cd2c548.js";import"./utils-f957b70f.js";const ne=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),be=()=>{var E;const{getCurrentProfile:q,getCurrentLogs:$,addLog:L,updateLog:I,deleteLog:V,setActiveTimer:S,activeTimer:p}=_(),l=q(),z=$(),{currentUser:u}=ee(),[H,N]=n.useState(!1),[d,F]=n.useState(null),[g,W]=n.useState(""),[c,Y]=n.useState("all"),[x,R]=n.useState("all"),[a,m]=n.useState(null),[o,v]=n.useState(null),[B,f]=n.useState(!1),[r,h]=n.useState({type:"feed",details:"",notes:"",time:D()}),M=n.useMemo(()=>{let t=z;if(c!=="all"&&(t=t.filter(s=>s.type===c)),x!=="all"){const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate());switch(x){case"today":t=t.filter(b=>new Date(b.timestamp)>=i);break;case"week":const C=new Date(i.getTime()-7*24*60*60*1e3);t=t.filter(b=>new Date(b.timestamp)>=C);break;case"month":const X=new Date(s.getFullYear(),s.getMonth()-1,s.getDate());t=t.filter(b=>new Date(b.timestamp)>=X);break}}return g&&(t=t.filter(s=>{var i;return s.type.toLowerCase().includes(g.toLowerCase())||s.details.toLowerCase().includes(g.toLowerCase())||((i=s.notes)==null?void 0:i.toLowerCase().includes(g.toLowerCase()))})),t.sort((s,i)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime())},[z,g,c,x]),j=[{value:"all",label:"All Activities",icon:"📋"},{value:"feed",label:"Feeding",icon:"🍼"},{value:"sleep",label:"Sleep",icon:"😴"},{value:"diaper",label:"Diaper",icon:"👶"},{value:"nap",label:"Nap",icon:"🛏️"},{value:"tummy",label:"Tummy Time",icon:"⏱️"},{value:"weight",label:"Weight & Height",icon:"📏"},{value:"temperature",label:"Temperature",icon:"🌡️"},{value:"vaccine",label:"Vaccine",icon:"💉"},{value:"health",label:"Health Note",icon:"📝"}],P=[{value:"all",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}],G=()=>{var s;if(!l||!r.details.trim()){y.error("Please fill in all required fields");return}const t={id:U(),type:r.type,icon:((s=j.find(i=>i.value===r.type))==null?void 0:s.icon)||"📋",color:"",details:r.details,timestamp:new Date(r.time),notes:r.notes||void 0};L(l.id,t),u&&T.addLog(u.uid,l.id,t).catch(console.error),f(!1),h({type:"feed",details:"",notes:"",time:D()}),y.success("Activity logged successfully!")},J=()=>{if(!l||!a||!a.details.trim()){y.error("Please fill in all required fields");return}I(l.id,a.id,{type:a.type,details:a.details,notes:a.notes,timestamp:new Date(a.timestamp)}),u&&T.updateLog(u.uid,l.id,a.id,{...a,timestamp:a.timestamp}).catch(console.error),m(null),y.success("Activity updated successfully!")},K=()=>{!l||!o||(V(l.id,o.id),u&&T.deleteLog(u.uid,l.id,o.id).catch(console.error),v(null),y.success("Activity deleted successfully!"))},O=t=>new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=t=>{S({type:t,startTime:Date.now()}),F(t),N(!0)},Q=(t,s)=>{if(!l||!d)return;const i=d==="sleep"?"😴":d==="nap"?"🛏️":"⏱️",C=`Duration: ${Math.round(t/6e4)} min`;L(l.id,{id:U(),type:d,icon:i,color:"",details:C,timestamp:new Date(s),rawDuration:t}),S(null),F(null),N(!1),y.success("Timer logged successfully!")};return l?e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Activity Log"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Track and manage ",l.babyName,"'s daily activities"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[e.jsxs("button",{onClick:()=>w("sleep"),className:"flex items-center px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors",disabled:!!p,children:[e.jsx(k,{size:20,className:"mr-2"}),"Sleep Timer"]}),e.jsxs("button",{onClick:()=>w("nap"),className:"flex items-center px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",disabled:!!p,children:[e.jsx(k,{size:20,className:"mr-2"}),"Nap Timer"]}),e.jsxs("button",{onClick:()=>w("tummy"),className:"flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",disabled:!!p,children:[e.jsx(k,{size:20,className:"mr-2"}),"Tummy Time"]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(le,{size:20,className:"mr-2"}),"Add Activity"]})]})]}),p&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6",children:e.jsx(ae,{isOpen:H,onClose:()=>N(!1),onSave:Q,label:`${d==null?void 0:d.charAt(0).toUpperCase()}${d==null?void 0:d.slice(1)} Timer`})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search activities...",value:g,onChange:t=>W(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),e.jsx("select",{value:c,onChange:t=>Y(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:j.map(t=>e.jsxs("option",{value:t.value,children:[t.icon," ",t.label]},t.value))}),e.jsx("select",{value:x,onChange:t=>R(t.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500",children:P.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm",children:M.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📋"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"No activities found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g||c!=="all"||x!=="all"?"Try adjusting your filters or search terms":"Start by adding your first activity!"})]}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.map(t=>e.jsx(te.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:t.type.charAt(0).toUpperCase()+t.type.slice(1)}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(k,{size:14,className:"mr-1"}),e.jsx("span",{children:O(t.timestamp)})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t.details}),t.notes&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:t.notes})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(t),className:"p-2 text-gray-500 hover:text-blue-500 dark:text-gray-400 dark:hover:text-blue-400",children:e.jsx(se,{size:18})}),e.jsx("button",{onClick:()=>v(t),className:"p-2 text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400",children:e.jsx(re,{size:18})})]})]})},t.id))})}),(c!=="all"||x!=="all")&&e.jsxs("div",{className:"mt-4 flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[c!=="all"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{size:16,className:"mr-1"}),e.jsxs("span",{children:["Filtered by: ",c]})]}),x!=="all"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{size:16,className:"mr-1"}),e.jsxs("span",{children:["Time range: ",(E=P.find(t=>t.value===x))==null?void 0:E.label]})]})]}),e.jsx(A,{isOpen:B,onClose:()=>f(!1),title:"Add Activity",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Activity Type"}),e.jsx("select",{value:r.type,onChange:t=>h({...r,type:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:j.slice(1).map(t=>e.jsxs("option",{value:t.value,children:[t.icon," ",t.label]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Details *"}),e.jsx("input",{type:"text",value:r.details,onChange:t=>h({...r,details:t.target.value}),placeholder:"e.g., 4 oz formula, wet diaper, etc.",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time"}),e.jsx("input",{type:"datetime-local",value:r.time,onChange:t=>h({...r,time:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:r.notes,onChange:t=>h({...r,notes:t.target.value}),placeholder:"Additional notes...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:G,className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Add Activity"}),e.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})}),e.jsx(A,{isOpen:!!a,onClose:()=>m(null),title:"Edit Activity",children:a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Activity Type"}),e.jsx("select",{value:a.type,onChange:t=>m({...a,type:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white",children:j.slice(1).map(t=>e.jsxs("option",{value:t.value,children:[t.icon," ",t.label]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Details *"}),e.jsx("input",{type:"text",value:a.details,onChange:t=>m({...a,details:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Time"}),e.jsx("input",{type:"datetime-local",value:D(new Date(a.timestamp)),onChange:t=>m({...a,timestamp:new Date(t.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:a.notes||"",onChange:t=>m({...a,notes:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:J,className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"Update Activity"}),e.jsx("button",{onClick:()=>m(null),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})}),e.jsx(A,{isOpen:!!o,onClose:()=>v(null),title:"Delete Activity",children:o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Are you sure you want to delete this activity? This action cannot be undone."}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white capitalize",children:o.type}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:o.details}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:O(o.timestamp)})]})]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{onClick:K,className:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors",children:"Delete"}),e.jsx("button",{onClick:()=>v(null),className:"flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 px-4 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"})]})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"No Profile Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please set up a profile to view activity logs."})]})})};export{be as default};
