import{c as D,u as z,j as e}from"./index-b97ebd9a.js";import{r as y}from"./vendor-863865b6.js";import{C as I,F as $}from"./filter-574f200f.js";import{R as T,B as f,C as m,X as u,Y as d,T as c,L as x,b as g,P as E,c as P,d as R,e as O,f as v,A as W,g as U}from"./charts-3cd2c548.js";import"./utils-f957b70f.js";const V=D("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),q=D("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),J=()=>{const{getCurrentProfile:C,getCurrentLogs:N}=z(),b=C(),p=N(),[j,F]=y.useState("week"),[n,l]=y.useState("feeding"),o=y.useMemo(()=>{if(!p.length)return{feeding:[],sleep:[],diaper:[],activityDistribution:[],weight:[]};const i=new Date,r=new Date;switch(j){case"week":r.setDate(i.getDate()-7);break;case"month":r.setMonth(i.getMonth()-1);break;case"quarter":r.setMonth(i.getMonth()-3);break;default:r.setDate(i.getDate()-7)}const h=p.filter(t=>new Date(t.timestamp)>=r),B=h.filter(t=>t.type==="feed").reduce((t,s)=>{const a=new Date(s.timestamp).toLocaleDateString();t[a]||(t[a]={date:a,count:0,amount:0}),t[a].count++;const k=s.details.match(/(\d+(?:\.\d+)?)\s*(oz|ml|ounces?|milliliters?)/i);return k&&(t[a].amount+=parseFloat(k[1])),t},{}),L=h.filter(t=>t.type==="sleep"||t.type==="nap").reduce((t,s)=>{const a=new Date(s.timestamp).toLocaleDateString();return t[a]||(t[a]={date:a,duration:0,sessions:0}),t[a].sessions++,s.rawDuration&&(t[a].duration+=s.rawDuration/(1e3*60*60)),t},{}),K=h.filter(t=>t.type==="diaper").reduce((t,s)=>{const a=new Date(s.timestamp).toLocaleDateString();return t[a]||(t[a]={date:a,count:0}),t[a].count++,t},{}),M=h.reduce((t,s)=>(t[s.type]=(t[s.type]||0)+1,t),{}),S=h.filter(t=>t.type==="weight").map(t=>{const s=t.details.match(/(\d+(?:\.\d+)?)\s*(lbs?|kg|pounds?|kilograms?)/i);return{date:new Date(t.timestamp).toLocaleDateString(),weight:s?parseFloat(s[1]):0,timestamp:new Date(t.timestamp)}}).sort((t,s)=>t.timestamp.getTime()-s.timestamp.getTime());return{feeding:Object.values(B),sleep:Object.values(L),diaper:Object.values(K),activityDistribution:Object.entries(M).map(([t,s])=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:s})),weight:S}},[p,j]),w=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];if(!b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"No Profile Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please set up a profile to view charts and analytics."})]})});const A=()=>{switch(n){case"feeding":return e.jsxs(f,{data:o.feeding,children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(d,{yAxisId:"left"}),e.jsx(d,{yAxisId:"right",orientation:"right"}),e.jsx(c,{}),e.jsx(x,{}),e.jsx(g,{yAxisId:"left",dataKey:"count",fill:"#3B82F6",name:"Feedings"}),e.jsx(g,{yAxisId:"right",dataKey:"amount",fill:"#10B981",name:"Amount (oz)"})]});case"sleep":return e.jsxs(W,{data:o.sleep,children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(d,{}),e.jsx(c,{}),e.jsx(x,{}),e.jsx(U,{type:"monotone",dataKey:"duration",stroke:"#8B5CF6",fill:"#8B5CF6",fillOpacity:.3,name:"Hours"}),e.jsx(v,{type:"monotone",dataKey:"sessions",stroke:"#EF4444",name:"Sessions"})]});case"diaper":return e.jsxs(f,{data:o.diaper,children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(d,{}),e.jsx(c,{}),e.jsx(x,{}),e.jsx(g,{dataKey:"count",fill:"#F59E0B",name:"Changes"})]});case"weight":return e.jsxs(O,{data:o.weight,children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(d,{}),e.jsx(c,{}),e.jsx(x,{}),e.jsx(v,{type:"monotone",dataKey:"weight",stroke:"#06B6D4",strokeWidth:3,name:"Weight"})]});case"distribution":return e.jsxs(E,{children:[e.jsx(P,{data:o.activityDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({name:i,percent:r})=>`${i} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.activityDistribution.map((i,r)=>e.jsx(R,{fill:w[r%w.length],name:i.name},`cell-${r}`))}),e.jsx(c,{}),e.jsx(x,{})]});default:return e.jsxs(f,{data:o.feeding,children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(u,{dataKey:"date"}),e.jsx(d,{yAxisId:"left"}),e.jsx(d,{yAxisId:"right",orientation:"right"}),e.jsx(c,{}),e.jsx(x,{}),e.jsx(g,{yAxisId:"left",dataKey:"count",fill:"#3B82F6",name:"Feedings"}),e.jsx(g,{yAxisId:"right",dataKey:"amount",fill:"#10B981",name:"Amount (oz)"})]})}};return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Charts & Analytics"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["Visualize ",b.babyName,"'s growth and patterns"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 md:mt-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"text-gray-500 dark:text-gray-400",size:20}),e.jsxs("select",{value:j,onChange:i=>F(i.target.value),className:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"}),e.jsx("option",{value:"quarter",children:"Last Quarter"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"text-gray-500 dark:text-gray-400",size:20}),e.jsxs("select",{value:n,onChange:i=>l(i.target.value),className:"px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("option",{value:"feeding",children:"Feeding"}),e.jsx("option",{value:"sleep",children:"Sleep"}),e.jsx("option",{value:"diaper",children:"Diaper Changes"}),e.jsx("option",{value:"weight",children:"Weight"}),e.jsx("option",{value:"distribution",children:"Activity Distribution"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"text-blue-500",size:20}),e.jsx(q,{className:"text-green-500",size:20})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-6",children:[e.jsx("button",{onClick:()=>l("feeding"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="feeding"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700"}`,children:"Feeding"}),e.jsx("button",{onClick:()=>l("sleep"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="sleep"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700"}`,children:"Sleep"}),e.jsx("button",{onClick:()=>l("diaper"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="diaper"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700"}`,children:"Diapers"}),e.jsx("button",{onClick:()=>l("weight"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="weight"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700"}`,children:"Weight"}),e.jsx("button",{onClick:()=>l("distribution"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n==="distribution"?"bg-blue-500 text-white":"bg-white dark:bg-gray-700"}`,children:"Distribution"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(T,{width:"100%",height:400,children:A()})})})]})})};export{J as default};
